---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Setup - FusionHit AI Workshop">
    <div class="setup-page">
        <header class="page-header">
            <h1>Configuraci√≥n del Ambiente</h1>
            <p class="intro">
                Sigue nuestra l√≠nea de tiempo para preparar tu entorno de desarrollo RAG.
            </p>
        </header>

        <!-- Timeline Navigation -->
        <div class="timeline-nav">
            <div class="timeline-line"></div>
            
            <button class="timeline-step active" data-step="1">
                <div class="step-circle">01</div>
                <span class="step-label">Google Colab</span>
            </button>
            
            <button class="timeline-step" data-step="2">
                <div class="step-circle">02</div>
                <span class="step-label">OpenAI API</span>
            </button>
            
            <button class="timeline-step" data-step="3">
                <div class="step-circle">03</div>
                <span class="step-label">Dataset</span>
            </button>
        </div>

        <!-- Content Area -->
        <div class="content-container">
            
            <!-- Step 1 Content -->
            <div class="step-content active" id="content-1">
                <div class="content-header">
                    <div class="icon-box orange">‚ö°</div>
                    <h2>Preparando Google Colab</h2>
                </div>
                <div class="doc-body">
                    <p class="lead">
                        Google Colab es un entorno de trabajo gratuito que se ejecuta en la nube. 
                        Lo usaremos para no depender de instalaciones locales complejas y aprovechar las GPUs de Google.
                    </p>
                    
                    <div class="doc-section">
                        <h3>1. Acceso al Entorno</h3>
                        <p>Para comenzar, necesitas una cuenta de Google. El entorno ya viene con Python y las librer√≠as m√°s comunes preinstaladas.</p>
                        <a href="https://colab.research.google.com/" target="_blank" class="action-btn btn-orange">
                            Ir a Google Colab ‚Üó
                        </a>
                    </div>

                    <div class="doc-section">
                        <h3>2. Configuraci√≥n Recomendada</h3>
                        <ul class="checklist">
                            <li>Crea un <strong>"Nuevo cuaderno"</strong> desde el men√∫ principal.</li>
                            <li>
                                Para acelerar el procesamiento, ve a: 
                                <code>Entorno de ejecuci√≥n > Cambiar tipo de entorno de ejecuci√≥n</code> 
                                y selecciona <strong>T4 GPU</strong>.
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Step 2 Content -->
            <div class="step-content" id="content-2">
                <div class="content-header">
                    <div class="icon-box green">üîë</div>
                    <h2>Configuraci√≥n de OpenAI</h2>
                </div>
                <div class="doc-body">
                    <p class="lead">
                        Utilizaremos la API de OpenAI para probar LLMs.
                    </p>

                    <div class="doc-section">
                        <h3>1. Generar API Key</h3>
                        <ol class="instruction-list">
                            <li>Ingresa a <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com</a>.</li>
                            <li>Haz clic en <strong>"Create new secret key"</strong>.</li>
                            <li>Asigna un nombre (ej: "FusionHit Workshop").</li>
                            <li><strong>Importante:</strong> Copia la clave y gu√°rdala en un lugar seguro. No podr√°s verla nuevamente.</li>
                        </ol>
                        <a href="https://platform.openai.com/api-keys" target="_blank" class="action-btn btn-green">
                            Panel de OpenAI ‚Üó
                        </a>
                    </div>
                </div>
            </div>

            <!-- Step 3 Content -->
            <div class="step-content" id="content-3">
                <div class="content-header">
                    <div class="icon-box blue">üìÇ</div>
                    <h2>Preparaci√≥n de Datos</h2>
                </div>
                <div class="doc-body">
                    <p class="lead">
                        El sistema RAG necesita una base de conocimiento. Usaremos un archivo JSON estructurado que simula la documentaci√≥n interna de una empresa.
                    </p>

                    <div class="doc-section">
                        <h3>1. Descargar Dataset</h3>
                        <div class="file-card">
                            <div class="file-icon">üìÑ</div>
                            <div class="file-details">
                                <span class="filename">knowledge_base.json</span>
                                <span class="filesize">2.4 MB ‚Ä¢ JSON Estructurado</span>
                            </div>
                            <a href="/data.json" download class="download-btn">Descargar ‚Üì</a>
                        </div>
                    </div>

                    <div class="doc-section">
                        <h3>2. Cargar en Colab</h3>
                        <p>Una vez tengas tu notebook abierto:</p>
                        <ul class="checklist">
                            <li>Haz clic en el icono de <strong>Carpeta (Archivos)</strong> en la barra lateral izquierda.</li>
                            <li>Arrastra el archivo <code>knowledge_base.json</code> descargado a esa √°rea.</li>
                            <li>Espera a que se complete la carga (el c√≠rculo naranja desaparecer√°).</li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>

        <div class="navigation-footer">
            <a href="/" class="back-link">‚Üê Volver al Inicio</a>
        </div>
    </div>
</Layout>

<script>
    const steps:any = document.querySelectorAll('.timeline-step');
    const contents = document.querySelectorAll('.step-content');

    steps.forEach(step => {
        step.addEventListener('click', () => {
            const targetStep = step.dataset.step;

            // Update Timeline UI
            steps.forEach(s => {
                const sStep = s.dataset.step;
                s.classList.remove('active');
                s.classList.remove('completed');
                
                if (sStep === targetStep) {
                    s.classList.add('active');
                } else if (sStep < targetStep) {
                    s.classList.add('completed');
                }
            });

            // Update Content UI
            contents.forEach(c => {
                c.classList.remove('active');
                if (c.id === `content-${targetStep}`) {
                    c.classList.add('active');
                }
            });
        });
    });
</script>

<style>
    .setup-page {
        max-width: 900px;
        margin: 0 auto;
        padding: 2rem 1rem;
        animation: fadeIn 0.8s ease-out;
    }

    .page-header {
        text-align: center;
        margin-bottom: 4rem;
    }

    h1 {
        font-size: 3rem;
        margin-bottom: 0.5rem;
        background: linear-gradient(45deg, #fff, #94a3b8);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .intro {
        font-size: 1.1rem;
        color: #a1a1aa;
    }

    /* --- Timeline Navigation --- */
    .timeline-nav {
        display: flex;
        justify-content: space-between;
        position: relative;
        margin-bottom: 4rem;
        padding: 0 2rem;
    }

    /* The connecting line */
    .timeline-line {
        position: absolute;
        top: 25px; /* Half of circle height (50px) */
        left: 4rem;
        right: 4rem;
        height: 2px;
        background: rgba(255, 255, 255, 0.1);
        z-index: 0;
    }

    .timeline-step {
        position: relative;
        z-index: 1;
        background: none;
        border: none;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.8rem;
        cursor: pointer;
        padding: 0;
        width: 100px;
    }

    .step-circle {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: #18181b;
        border: 2px solid rgba(255, 255, 255, 0.1);
        color: #71717a;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 1.1rem;
        transition: all 0.3s ease;
    }

    .step-label {
        color: #71717a;
        font-size: 0.9rem;
        font-weight: 500;
        transition: all 0.3s ease;
    }

    /* Active State */
    .timeline-step.active .step-circle {
        background: var(--accent-blue);
        border-color: var(--accent-blue);
        color: white;
        box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
        transform: scale(1.1);
    }

    .timeline-step.active .step-label {
        color: white;
    }

    /* Completed State (optional visual cue) */
    .timeline-step.completed .step-circle {
        background: rgba(59, 130, 246, 0.2);
        border-color: var(--accent-blue);
        color: var(--accent-blue);
    }

    /* Specific Colors for Steps when active */
    .timeline-step[data-step="1"].active .step-circle { background: var(--accent-orange); border-color: var(--accent-orange); box-shadow: 0 0 20px rgba(249, 115, 22, 0.4); }
    .timeline-step[data-step="2"].active .step-circle { background: var(--accent-green); border-color: var(--accent-green); box-shadow: 0 0 20px rgba(16, 185, 129, 0.4); }
    .timeline-step[data-step="3"].active .step-circle { background: var(--accent-blue); border-color: var(--accent-blue); box-shadow: 0 0 20px rgba(59, 130, 246, 0.4); }


    /* --- Content Area --- */
    .content-container {
        position: relative;
        min-height: 400px;
    }

    .step-content {
        display: none;
        animation: slideUp 0.5s ease-out;
    }

    .step-content.active {
        display: block;
    }

    .content-header {
        display: flex;
        align-items: center;
        gap: 1.5rem;
        margin-bottom: 2rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        padding-bottom: 1.5rem;
    }

    .icon-box {
        width: 60px;
        height: 60px;
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        background: rgba(255, 255, 255, 0.05);
    }

    .icon-box.orange { color: var(--accent-orange); background: rgba(249, 115, 22, 0.1); }
    .icon-box.green { color: var(--accent-green); background: rgba(16, 185, 129, 0.1); }
    .icon-box.blue { color: var(--accent-blue); background: rgba(59, 130, 246, 0.1); }

    .content-header h2 {
        margin: 0;
        font-size: 2rem;
        color: white;
    }

    .doc-body {
        color: #d4d4d8;
        line-height: 1.7;
    }

    .lead {
        font-size: 1.2rem;
        color: #e4e4e7;
        margin-bottom: 2.5rem;
    }

    .doc-section {
        margin-bottom: 2.5rem;
    }

    .doc-section h3 {
        color: white;
        font-size: 1.3rem;
        margin-bottom: 1rem;
    }

    /* Lists */
    .checklist {
        list-style: none;
        padding: 0;
    }

    .checklist li {
        position: relative;
        padding-left: 1.8rem;
        margin-bottom: 0.8rem;
    }

    .checklist li::before {
        content: "‚úì";
        position: absolute;
        left: 0;
        color: var(--accent-green);
        font-weight: bold;
    }

    .instruction-list {
        padding-left: 1.2rem;
        color: #a1a1aa;
    }
    
    .instruction-list li {
        margin-bottom: 0.5rem;
    }

    .instruction-list a {
        color: var(--accent-blue);
        text-decoration: none;
    }

    /* Warning Box */
    .warning-box {
        background: rgba(234, 179, 8, 0.1);
        border: 1px solid rgba(234, 179, 8, 0.3);
        padding: 1.5rem;
        border-radius: 12px;
    }
    
    .warning-box h3 {
        color: #facc15; /* Yellow */
        margin-top: 0;
    }

    .warning-box p {
        margin-bottom: 0;
        color: #fef08a;
    }

    /* Buttons */
    .action-btn {
        display: inline-block;
        padding: 0.8rem 1.5rem;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        color: white;
        margin-top: 1rem;
        transition: transform 0.2s;
    }

    .action-btn:hover {
        transform: translateY(-2px);
    }

    .btn-orange { background: var(--accent-orange); }
    .btn-green { background: var(--accent-green); }

    /* File Card */
    .file-card {
        background: #18181b;
        border: 1px dashed #3f3f46;
        border-radius: 12px;
        padding: 1.5rem;
        display: flex;
        align-items: center;
        gap: 1.5rem;
    }

    .file-icon { font-size: 2rem; }
    
    .file-details {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
    }

    .filename { color: white; font-family: monospace; font-size: 1.1rem; }
    .filesize { color: #71717a; font-size: 0.9rem; }

    .download-btn {
        background: var(--accent-blue);
        color: white;
        padding: 0.6rem 1.2rem;
        border-radius: 6px;
        text-decoration: none;
        font-weight: 600;
        transition: background 0.2s;
    }

    .download-btn:hover { background: #2563eb; }

    /* Code Snippet */
    .code-snippet {
        background: #0f0f11;
        border-radius: 8px;
        padding: 1rem;
        border: 1px solid #27272a;
    }

    .snippet-label {
        display: block;
        font-size: 0.8rem;
        color: #71717a;
        margin-bottom: 0.5rem;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    pre { margin: 0; overflow-x: auto; }
    code { color: #a5b4fc; font-family: monospace; }

    .navigation-footer {
        text-align: center;
        margin-top: 4rem;
        padding-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .back-link {
        color: #71717a;
        text-decoration: none;
        transition: color 0.2s;
    }

    .back-link:hover { color: white; }

    @keyframes slideUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @media (max-width: 768px) {
        .timeline-nav {
            flex-direction: column;
            align-items: flex-start;
            gap: 1.5rem;
        }
        
        .timeline-line {
            left: 25px;
            top: 0;
            bottom: 0;
            width: 2px;
            height: auto;
            right: auto;
        }

        .timeline-step {
            flex-direction: row;
            width: 100%;
        }
    }
</style>
